---
# We fail if ansible is not 2.0, just because we the the compatiblity-mode
# to '2.0' in the Vagrantfile. It may also work with new versions, if they are available.

# This playbook has been tested with ansible 2.7.12 and 2.8.6, 2.9.0
- hosts: localhost
  become: false
  tasks:
    - fail:
        msg: This playbook should be run with ansible 2.9.*. Your version is {{ ansible_version.full }}"
      name: Fail if ansible != 2.9.*
      when: (ansible_version.major == 2 and ansible_version.minor == 9) == false
      run_once: true

    - fail:
        msg: fail if k8s_apiserver_port == 6443
      name: k8s_apiserver_port
      when: k8s_apiserver_port == 6443
      run_once: true

- hosts: all
  tasks:
    - name: "Ping all Nodes"
      ping:
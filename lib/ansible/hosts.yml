# This playbook does all provisioning of the machines
# It performs OS configuration, installs docker and the kubernetes binaries kubectl, kubelet and kubeadm
# It also performs a check of the current host cluster state (init/join)
# It runs kubeclt for
#   - init a new cluster (is setup_create_new_k8s_cluster is set)
#   - join other nodes to the cluster
---

# add setup role to all linux hosts, if not disabled by 'setup_skip_system_setup'
- hosts: lnxclp:lnxwrk
  tasks:
    - import_role: name=lnxsetup
      when: setup_skip_system_setup == false

- hosts: winwrk
  tasks:
    - import_role: name=winsetup
      when: setup_skip_system_setup == false


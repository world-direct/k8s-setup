###########################################
## This is the role which initializes the cluster on the lnxclp_setup node
##
## It is dynamically included by cluster.yml playbook

- name: "clustersetup - running k8s-setup init (you may cat {{ k8s_setup_logdir }}/k8s-setup.log to check progress"
  shell: "{{ k8s_setup_dir }}/k8s-setup init >> {{ k8s_setup_logdir }}/k8s-setup.log"

- name: clustersetup - fetch admin.conf to provisioning client for later import
  fetch:
    src: /etc/kubernetes/admin.conf

    # this is relative to the /lib/ansible directory on localhost
    dest: "../../.local/admin.conf"
    flat: true
